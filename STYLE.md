# 코딩 스타일 가이드

이 문서는 프로젝트의 선호하는 코딩 패턴과 스타일 결정을 기록합니다. 이 문서를 수정할때는 가급적 간결하고 중복이 없도록 해야 합니다.
불필요한 파일 새로 생성하지 말 것.
1회성으로 실행시켜야 하는 파이썬 코드에 대해서는 파일을 새로 생성하지 말고 커맨드 창에 직접 실행시킬 것.

## 1. 환경 설정 (Configuration)
- **API 키 관리**: API 키와 같은 민감한 정보는 소스 코드에 직접 포함하지 않으며, `.env` 파일을 통해 환경 변수로 관리합니다.
- **라이브러리**: `python-dotenv`를 사용하여 `.env` 파일을 로드합니다.

## 2. 사용자 인터페이스 (User Interface)
- **CLI 스타일**: 불필요한 장식(환영 메시지, 종료 메시지, 구분선 등)을 최소화하고, 기능 중심의 간결한 인터페이스를 지향합니다.
- **프롬프트**: 사용자 입력 프롬프트는 `호두 > `를 사용하며, 봇 응답에는 `AI : ` 접두어를 붙여 구분을 명확히 합니다.
- **출력 제어**: 라이브러리에서 발생하는 불필요한 경고 메시지(예: `FutureWarning`)는 코드 상에서 suppress 하여 깨끗한 출력을 유지합니다.

## 3. 로깅 (Logging)
- **로그 파일**: 대화 내용은 `log.md` 파일에 기록합니다.
- **포맷**: 매 실행 시 파일을 초기화하며, 타임스탬프와 발화자(User/Gemini)를 포함합니다.
  - **Gemini**: 서버로부터 받은 원문(Raw Response Object)을 기록합니다.
  - **User**: 사용자의 입력 메시지뿐만 아니라, **도구 실행 결과(Function Response)**도 Gemini에게 보내는 데이터이므로 User 발화로 기록합니다.
  - **제외**: 로컬에서 도구가 어떻게 실행되었는지(함수 호출 로그, 디버그 메시지 등)는 기록하지 않고, 오직 **LLM과의 데이터 교환** 내용만 남깁니다.

## 4. 도구 (Function Calling)
- **스키마 분리**: 도구의 설명(JSON Schema)만 모델에 전달하고, 파이썬 코드는 노출하지 않는다.
- **자동 호출 비활성화**: `automatic_function_calling`을 비활성화하고 도구 호출/결과 전달을 수동으로 처리한다.
- **연쇄 호출 지원**: 모델이 여러 도구를 순차적으로 호출할 수 있도록 `while` 루프로 반복 처리한다.

## 5. 버전 관리 (Version Control)
- **Gitignore**: `.env`, `__pycache__`, 가상환경 폴더 등은 반드시 `.gitignore`에 포함하여 커밋되지 않도록 합니다.

## 6. 코드 구조 (Code Structure)
- **단일 파일**: 불필요한 파일 생성을 지양하고, 가능한 `main.py` 하나의 파일에 로직을 간결하게 구성합니다.
- **Clean Code**: 배포 시에는 불필요한 `print` 문이나 디버깅 코드를 삭제하여 깔끔한 상태를 유지합니다.